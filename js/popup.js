
/*const worksData = {

  hinatabokko: {
    type: "site",
    category: "自主制作",
    genre: "Webサイト",
    mockup: {
      img: "./images/hinatabokko-PCSP.png",
      caption: "古民家甘味処ひなたぼっこWEBサイト（デモサイト）"
    },

    info: {
      target: "<br>古民家の雰囲気、甘いものが好きな20～30代の女性。ひといきつける場所を求める20～30代の女性。",
      period: "<br>25時間（企画 / デザイン / ロゴ制作 / コーディング）",
      points: "<br>安心して来店できる導線設計を意識し、WordPress（Contact Form 7）でお問い合わせフォームを実装しました。PC表示ではタイトル文字が縦書き表示になる等、レスポンシブデザインもこだわりました。若い女性が親しみやすいデザインにするために温かみのある色味、丸みのある枠をメインに構成ました。また、コントラスト、彩度を下げた画像を使用することで、古民家のどこか懐かしいレトロな雰囲気を表現しました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../hinatabokko/index.html"
  },

  sydney: {
    type: "site",
    category: "自主制作",
    genre: "Webサイト",
    mockup: {
      img: "./images/site1-viewmore.png",
      caption: "シドニーのおすすめスポット3選サイト"
    },

    info: {
      target: "<br>海外に興味がある、もしくはシドニーに旅行の予定があり行き先を調べる20代～30代の方。",
      period: "<br>25時間（企画 / デザイン / コーディング）",
      points: "<br>SP表示、PC表示ともに見やすいシンプルなデザインを意識しました。シドニーのゆったりとした自然の多い街の雰囲気、おしゃれなカフェ文化のイメージを表現するため、落ち着いたペールトーンメインでデザインしました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../kadai-responsive-coding/index.html"
  },

  ginrintei: {
    type: "site",
    category: "クライアントワーク",
    genre: "Webサイト",
    mockup: {
      img: "./images/coming-soon.png",
      caption: "銀鱗亭様サイト"
    },

    info: {
      target: "<br>経済的に余裕があり、美味しいものを食べるのが好きな2～50代の男女。もともと銀鱗亭のことを知っていて、お店の詳細、雰囲気を知りたい方。",
      period: "<br>（企画 / ヒアリング / 写真 / デザイン / コーディング）",
      points: "<br>「来店時はなるべく予約をしてもらいたい」という課題解決のため、「ご予約はこちら」ボタンを固定ヘッダーに配置し予約へのハードルを下げました。また、勘違いされやすい「営業時間・支払いは現金のみ等の情報」もメニュー料金表の前に配置することで見落としを防ぐ工夫をしました。山中にある店舗のため電波が弱く、ページ遷移の際の離脱を防ぐため情報をトップページにまとめました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../kadai-responsive-coding/index.html"
  },

  kazukiumeda: {
    type: "site",
    category: "クライアントワーク", 
    genre: "Webサイト",
    mockup: {
      img: "./images/coming-soon.png",
      caption: "梅田和希様サイト"
    },

    info: {
      target: "<br>健康意識、漠然とした老後不安が高まり、資産運用・貯蓄についてプロに相談したいと考えている3～40代男女。家族を持ち、すでに保険に入っているが費用削減のためプランを見直したいと考えている3～40代の男女。",
      period: "<br>（企画 / ヒアリング / デザイン / コーディング）",
      points: "<br>「初見のお客様に警戒されやすい」という課題を解決するため、温かい色合い・読みやすいシンプルな構成を意識し、誠実な人間性が伝わる親しみやすいデザインにまとめました。業務内容コンテンツでは、「人生を通してお金の悩みを解決できる」ということを伝えるため現在→未来と時系列でまとめ、わかりやすい動線になるよう工夫しました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../kadai-responsive-coding/index.html"
  },

  pf: {
    type: "site",
    category: "自主制作",
    genre: "Webサイト",
    mockup: {
      img: "./images/originalportfolio-responsive.png",
      caption: "オリジナルポートフォリオサイト（このサイト）"
    },

    info: {
      target: "<br>Webデザイナーを募集している企業の採用担当者、Webデザイナーの方。",
      period: "<br>40時間（企画 / デザイン / コーディング/写真）",
      points: "<br>油絵、イラスト、美術セット塗装の経験があるため、手描き線のような流形シェイプ、角丸を取り入れました。メインビジュアル、フッターの画像は油絵の作品の一部分を使用しています。一目でわかるよう自分の情報をトップページにまとめ、気になった作品はしっかり見られるよう作品ページを設置しました。柔らかい色をメインに構成し、シェイプの緩やかさと相まって穏やかで優しいイメージのサイトを目指して制作しました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "/kadai-original/index.html"
  },

  tousai: {
    type: "site",
    category: "自主制作",
    genre: "LP",
    mockup: {
      img: "./images/PCSP-tousaischoolimage.png",
      caption: "トウサイスクール（架空のITスクール）ランディングページ"
    },

    info: {
      target: "<br>自分のキャリアについて考え、IT技術を学びたいと考えている20～40代前半の方、スキルアップをして副業獲得を目指す20～40代のIT人材。",
      period: "<br>35時間（企画 / デザイン /コーディング）",
      points: "<br>架空の大手ITスクールLPを想定して制作しました。無料カウンセリングに申し込んでもらうことを目的に、情報を厳選し視線が自然とCTAボタンに向かうデザインを心掛けました。IT業界の知的で洗礼されたイメージを表現するため、ベースカラーは彩度低めの色でまとめました。一方で、CTAボタンはやる気や熱意を感じる再度高めのオレンジを設定し目立たせました。"
    },

    steps: [

      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../practice_LP/index.html"
  },

  moocresbanner: {
    type: "image",
    category: "クライアントワーク",
    genre: "バナー",

    mockup: {
      img: "./images/banner/moocresbanner_back.jpg",
      largeImg: "./images/banner/MOOCRES_banner.jpg",
      caption: "動画制作スクールMOOCRESバナー"
    },

    info: {
      target: "副業から始めてプロの動画クリエイターになりたいと考えている20~30代の男性",
      period: "2.5時間",
      points: "太めのゴシック体と濃い色のグラデーションで男性向けの力強さ、技術力を表現しました。文字に角度をつけて勢い、上昇志向が感じられるようなレイアウトを意識しました。また、少人数クラスで楽しそうな様子が伝わるよう画像を選びました。"
    }
  },

    TechAcademyWebdesign: {
    type: "image",
    category: "クライアントワーク",
    genre: "バナー",

    mockup: {
      img: "./images/banner/techacademybanner-back.png",
      largeImg: "./images/banner/techacademy-banner.jpg",
      caption: "TechAcademyWebデザインコースバナー"
    },

    info: {
      target: "未経験でwebデザイナーへの転職を希望する2～30代の女性",
      period: "4時間",
      points: " 指定色の黄色をベースに落ち着いた暖色でまとめ親しみやすさを表現しました。信頼感を感じてもらえるよう、シャープな斜線と可読性の高いゴシック体を使用しました。"
    }
  },

    TechAcademyhukugyou: {
    type: "image",
    category: "クライアントワーク",
    genre: "バナー",

    mockup: {
      img: "./images/banner/techacademy2_back.jpg",
      largeImg: "./images/banner/techacademybanner_2.jpg",
      caption: "TechAcademyはじめての副業コースバナー"
    },

    info: {
      target: " 副業にチャレンジしたいけど、何が良いか迷っている20~30代の女性",
      period: "3時間",
      points: "Instagramのストーリーに掲載予定という依頼だったため、バナー下部にリンク、タグを貼る余白を設けました。指定色の水色をベースに寒色でまとめ、爽やかでスマートな印象のデザインにしました。"
    }
  },

      tousaibanner: {
    type: "image",
    category: "自主制作",
    genre: "バナー",

    mockup: {
      img: "./images/banner/tousai-banner.png",
      largeImg: "./images/banner/tousai-banner.png",
      caption: "トウサイスクール（架空のITスクール）バナー"
    },

    info: {
      target: " 自分のキャリアについて考え、IT技術を学びたいと考えている20～40代前半の方、スキルアップをして副業獲得を目指す20～40代のIT人材。",
      period: "2時間",
      points: "架空のITスクール「トウサイスクール」LPへの誘導を目的として制作しました。LPのデザインをベースに情報に優先順位をつけ、視線が情報をたどってCTAボタンまでスムーズに流れるようデザインを考えました。"
  },
},

    eikaiwa: {
    type: "image",
    category: "自主制作",
    genre: "バナー",

    mockup: {
      img: "./images/banner/wotrks-page-bunners.jpg",
      largeImg: "./images/banner/wotrks-page-bunners.jpg",
      caption: "架空の英会話教室のバナー"
    },

    info: {
      target: "2歳～小学生の子供がいる親世代の方。小学生～中学生の方。",
      period: "5時間",
      points: "知的なイメージの青をベースにデザインしました。冷たい印象にならないよう、丸い図形、丸めのゴシック体フォントを使用し、色の明度を工夫しました。デザインを複数のサイズに対応させるうえで、情報に優先順位をつけしっかり伝えたい情報が伝わるよう構成を考えました。"
    }
  },

      icon1: {
    type: "image",
    category: "自主制作", 
    genre: "アイコン",

    mockup: {
      img: "./images/icon/icons-whitepng.png",
      largeImg: "./images/icon/icons-whitepng.png",
      caption: "オリジナルポートフォリオサイト（当サイト）で使用したアイコン"
    },

    info: {
      points: "ポップで面白い、手描きのイメージを表現しました。ボタンに使用しているものは、マウスホバーするとふわふわ動く効果も付けました。"
    }
  },

    icon2: {
    type: "image",
    category: "自主制作", 
    genre: "アイコン",

    mockup: {
      img: "./images/icon/hinatabokko-logo.png",
      largeImg: "./images/icon/hinatabokko-logo.png",
      caption: "古民家甘味処ひなたぼっこサイトで使用したアイコン"
    },

    info: {
      points: "店名の由来になったひなたぼっこする鳥たちをモチーフにお店のロゴをデザインしました。一目で太陽とわかるシンプルさとかわいらしさの共存を意識しました。"
    }
  },

    lineheader: {
    type: "image",
    category: "クライアントワーク",  
    genre: "デジタルイラスト",

    mockup: {
      img: "./images/illust/line-header.png",
      largeImg: "./images/illust/IMG_2125.PNG",
      caption: "LINEヘッダー用イラスト"
    },

    info: {
      points: "LINEのヘッダー画像用に制作しました。依頼者の趣味のコーヒーを取り入れた「しっかり似ているデフォルメ似顔絵」を目指しました。大変似ていると好評です。<br>使用ツール：ibisPaint X"
    }
  },

        xheader: {
    type: "image",
    category: "クライアントワーク",
    genre: "デジタルイラスト",

    mockup: {
      img: "./images/xheader-yukisan-backwhite.png",
      largeImg: "./images/illust/Xheader-yukisann.png",
      caption: "Xのheader用イラスト"
    },

    info: {
      points: "Xのheader用にヒアリングをもとに制作しました。メッセージを簡潔に伝えつつ、お茶面な人柄を手描きのイラストで表現しました。<br>使用ツール：ibisPaint X"
    }
  },

      illust1: {
    type: "image",
    category: "自主制作",
    genre: "デジタルイラスト",

    mockup: {
      img: "./images/illust/nigaoe.png",
      largeImg: "./images/illust/illusticon.png",
      caption: "オリジナルTシャツ用イラスト"
    },

    info: {
      points: "誕生日プレゼントのTシャツ用に制作しました。特徴をつかみつつなるべくシンプルに仕上げることで普段使いしやすいデザインを意識しました。着用して出かけると「似てるね！」とよく声をかけていただけます。<br>使用ツール：ibisPaint X"
    }
  },

      illust2: {
    type: "image",
    category: "自主制作", 
    genre: "デジタルイラスト",

    mockup: {
      img: "./images/illust/zuttomo.png",
      largeImg: "./images/illust/IMG_2127.PNG",
      caption: "オリジナルTシャツ用イラスト"
    },

    info: {
      points: "同期にプレゼントするオリジナルTシャツ用に制作しました。平成に流行したイラストをオマージュした似顔絵で、感謝の気持ちを伝えました。<br>使用ツール：ibisPaint X"
    }
  },

        illust3: {
    type: "image",
    category: "クライアントワーク",
    genre: "アナログイラスト",

    mockup: {
      img: "./images/illust/baitpop.png",
      largeImg: "./images/illust/baitpop.png",
      caption: "販売促進のための売り場POP"
    },

    info: {
      points: "1秒で伝わるPOPをテーマに制作しました。大きなイラスト、実際に食べた感想を盛り込むことで目を引くPOPを目指しました。<br>使用画材：ボールペン、水性マーカー、コピー用紙"
    }
  },

      illust4: {
    type: "image",
    category: "クライアントワーク",
    genre: "アナログイラスト",

    mockup: {
      img: "./images/illust/tirashi.png",
      largeImg: "./images/illust/tirashi.png",
      caption: "ショップ月刊チラシ"
    },

    info: {
      points: "月刊で発行していた手描きのチラシ。月毎にタイトル文字の字体を変えるなど工夫して楽しく制作しました。<br>使用画材：ボールペン、水性マーカー、コピー用紙"
    }
  },

      illust5: {
    type: "image",
    category: "自主制作",
    genre: "アナログイラスト",

    mockup: {
      img: "./images/illust/hutaritabi.png",
      largeImg: "./images/illust/IMG_6819.JPG",
      caption: "ふたりたび"
    },

    info: {
      points: "学生の時のメインテーマである「島」のイメージを広げていた際の作品です。どこか遠い所へ行きたい気持ちを形にしました。<br>使用画材：透明水彩絵の具、ボールペン、画用紙"
    }
  },

      illust6: {
    type: "image",
    category: "自主制作",
    genre: "アナログイラスト",

    mockup: {
      img: "./images//illust/oyatu.png",
      largeImg: "./images/illust/IMG_6818.JPG",
      caption: "おやつの時間"
    },

    info: {
      points: "パンケーキが描きたくなり制作しました。自身の油絵作品を登場させるなど、一貫した世界観を持ったイラストを描くのが好きです。<br>使用画材：透明水彩絵の具、ボールペン、画用紙"
    }
  },

        oilpaint1: {
    type: "image",
    category: "自主制作",
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint1.png",
      largeImg: "./images/oilpaint/IMG_6277.JPG",
      caption: "卒業制作「Utopia_be in」"
    },

    info: {
      points: "大学の卒業制作で制作しました。自分の理想の世界です。<br>油絵具、アルキド樹脂絵具、キャンバス/H2100xW2400mm/2020年"
    }
  },

          oilpaint2: {
    type: "image",
    category: "自主制作", 
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint2.png",
      largeImg: "./images/oilpaint/FullSizeRender.JPG",
      caption: "コンクール応募作品「回顧」"
    },

    info: {
      points: "自分について、思い返して考えて描きました。<br>油絵具、キャンバス/H1620xW1303mm/2017年。"
    }
  },

          oilpaint3: {
    type: "image",
    category: "自主制作",
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint3.png",
      largeImg: "./images/oilpaint/IMG_2300.JPG",
      caption: "窓辺の少女模写"
    },

    info: {
      points: "大学の古典技法研究ゼミにて制作。当時と同じ材料を使用し支持体から自作し、グリザイユ技法で描いています。<br>油絵具、キャンバス/H877xW760mm/2018年"
    }
  },

          oilpaint4: {
    type: "image",
    category: "自主制作", 
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint4.png",
      largeImg: "./images/oilpaint/IMG_0643.JPG",
      caption: "あなたと"
    },

    info: {
      points: "グループ展の展示に向けて制作。イラストのテイストと油絵の融合を目指しました。<br>油絵具、アルキド樹脂絵具、キャンバス/H227xW158mm/2020年"
    }
  },

          oilpaint5: {
    type: "image",
    category: "自主制作", 
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint5.png",
      largeImg: "./images/oilpaint/5509651C-0616-44D4-BCB1-8F6C8699EF7E.JPG",
      caption: "「理想郷/楽園」"
    },

    info: {
      points: "「島」をテーマにすることにしたきっかけの作品です。当時感じていた息苦しさから一歩離れて、穏やかに暮らすことのできる理想の世界を描きました。<br>油絵具、アルキド樹脂絵具、パネル/H803xW910mm/2018年"
    }
  },
};

const popup = document.getElementById("popup");
const title = document.querySelector(".popup-title");
const stepsContainer = document.querySelector(".popup-steps");
const link = document.querySelector(".popup-link");

const mockupImage = document.querySelector(".mockup-image");
const mockupCaption = document.querySelector(".mockup-caption");
const mockupLink = document.querySelector(".mockup-link");

document.querySelectorAll(".website-image").forEach(card => {

  const trigger = card.querySelector(".js-popup-open");
  if (!trigger) return;

  const id = trigger.dataset.work;
  const data = worksData[id];
  if (!data) return;

  const categoryTag = card.querySelector(".tag-category");
  const genreTag = card.querySelector(".tag-genre")

  if (categoryTag) {
    categoryTag.textContent = data.category || "";
    categoryTag.classList.remove("client");

    if (data.category === "クライアントワーク") {
      categoryTag.classList.add("client");
    }
  }

  if (genreTag) {
    genreTag.textContent = data.genre || "";
  }

});

function normalizeGenre(genre) {

  const otherGenres = [
    "デジタルイラスト",
    "アナログイラスト",
    "油絵"
  ];

  if (otherGenres.includes(genre)) {
    return "その他";
  }

  return genre;
}

const filterButtons = document.querySelectorAll(".filter-btn");
const worksCards = document.querySelectorAll(".website-image");

const params = new URLSearchParams(window.location.search);
const filterType = params.get("filter");


filterButtons.forEach(button => {

  button.addEventListener("click", () => {

    const filterValue = button.dataset.filter;

    if (filterValue === "ALL") {

      filterButtons.forEach(btn => btn.classList.remove("is-active"));
      button.classList.add("is-active");

      worksCards.forEach(card => {
        card.style.display = "block";
      });

      return;
    }

    const allButton = document.querySelector('[data-filter="ALL"]');
    if (allButton) {
      allButton.classList.remove("is-active");
    }

    button.classList.toggle("is-active");

    applyFilter();

  });

});


let isInitialLoad = true;
function applyFilter() {

  let activeFilters = Array.from(
    document.querySelectorAll(".filter-btn.is-active")
  ).map(btn => btn.dataset.filter);

if (isInitialLoad) {

  if (filterType === "other") {
    activeFilters = ["その他"];
  }

  if (filterType === "main") {
    activeFilters = ["Webサイト", "LP", "バナー", "アイコン"];
  }

  filterButtons.forEach(btn => {
    if (activeFilters.includes(btn.dataset.filter)) {
      btn.classList.add("is-active");
    } else {
      btn.classList.remove("is-active");
    }
  });

  isInitialLoad = false;
}

  if (activeFilters.length === 0) {
    worksCards.forEach(card => {
      card.style.display = "block";
    });
    return;
  }

  function forceAllFilter() {

  filterButtons.forEach(btn => {
    btn.classList.remove("is-active");
    if (btn.dataset.filter === "ALL") {
      btn.classList.add("is-active");
    }
  });

  worksCards.forEach(card => {
    card.style.display = "block";
  });

  isInitialLoad = false;
}

  worksCards.forEach(card => {

    const workId = card.querySelector(".js-popup-open").dataset.work;
    const data = worksData[workId];

    const normalizedGenre = normalizeGenre(data.genre);
    const workTags = [data.category, normalizedGenre];

    const match = activeFilters.some(filter =>
      workTags.includes(filter)
    );

    card.style.display = match ? "block" : "none";

  });

}

document.querySelectorAll(".js-popup-open").forEach(btn => {
  btn.addEventListener("click", e => {
    e.preventDefault();

  const popupContent = document.querySelector(".popup-content");
popupContent.scrollTop = 0;

    const id = btn.dataset.work;
    const data = worksData[id];
    popup.dataset.type = data.type;

    title.textContent = data.title || "";

    mockupImage.src = data.mockup.img;
    mockupImage.dataset.large = data.mockup.largeImg || data.mockup.img;

    mockupCaption.textContent = data.mockup.caption;
    if (data.type === "site") {
      mockupLink.href = data.url;
      mockupLink.style.pointerEvents = "auto";
    } else {
      mockupLink.removeAttribute("href");
    }

let infoContainer = document.querySelector(".popup-info");

if (!infoContainer) {
  infoContainer = document.createElement("div");
  infoContainer.classList.add("popup-info");
}

infoContainer.innerHTML = ""; 

if (data.info.target) {
  infoContainer.insertAdjacentHTML("beforeend", `
    <p><strong>ターゲット:</strong> ${data.info.target}</p>
  `);
}

if (data.info.period) {
  infoContainer.insertAdjacentHTML("beforeend", `
    <p><strong>制作期間:</strong> ${data.info.period}</p>
  `);
}

if (data.info.points) {
  infoContainer.insertAdjacentHTML("beforeend", `
    <p><strong>意識したこと:</strong> ${data.info.points}</p>
  `);
}

mockupCaption.after(infoContainer);

    stepsContainer.innerHTML = "";
    link.style.display = "none";

    const oldTitle = document.querySelector(".steps-title");
    if (oldTitle) oldTitle.remove();
    if (data.type === "site") {
      const stepsTitle = document.createElement("h3");
      stepsTitle.classList.add("steps-title");
      stepsTitle.textContent = "制作過程";
      infoContainer.after(stepsTitle);

      data.steps.forEach((step, index) => {
        stepsContainer.insertAdjacentHTML("beforeend", `
      <div class="popup-step">
        <h4>
          <span class="step-number">${index + 1}</span>
          <span class="step-title">${step.title}</span>
        </h4>
        <img src="${step.img}" data-large="${step.largeImg || step.img}" alt="">

        <p>${step.text}</p>
      </div>
    `);
      });

      link.href = data.url;
      link.style.display = "inline-block";
    } else if (data.type === "image") {
      stepsContainer.innerHTML = "";
      link.style.display = "none";
    }
    popup.classList.add("is-open");
    setTimeout(() => {
  popupContent.scrollTop = 0;
}, 0);
  });
});

document.querySelector(".popup-close").addEventListener("click", () => {
  popup.classList.remove("is-open");
  const popupContent = document.querySelector(".popup-content");
  popupContent.scrollTop = 0;
});

popup.addEventListener("click", e => {
  if (e.target === popup) {
    popup.classList.remove("is-open");
    const popupContent = document.querySelector(".popup-content");
    popupContent.scrollTop = 0;
  }
});

const imageModal = document.getElementById("image-modal");
const imageModalImg = document.querySelector(".image-modal-content");
const imageModalClose = document.querySelector(".image-modal-close");
function closeImageModal() {
  imageModal.classList.remove("is-open");
  imageModalImg.src = "";
  document.body.style.overflow = "";
}

imageModalClose.addEventListener("click", closeImageModal);

imageModal.addEventListener("click", function (e) {
  if (e.target === imageModal) {
    closeImageModal();
  }
});

mockupImage.addEventListener("click", (e) => {
  const currentType = popup.dataset.type;
  if (currentType === "site") return;
  const largeSrc = e.currentTarget.dataset.large || e.currentTarget.src;
  imageModalImg.src = largeSrc;
  imageModal.classList.add("is-open");
  document.body.style.overflow = "hidden";
});

window.addEventListener("load", () => {

  const params = new URLSearchParams(window.location.search);
  const workId = params.get("work");

  if (!workId) return;

  const data = worksData[workId];
  if (!data) return;

  const trigger = document.querySelector(
    `.js-popup-open[data-work="${workId}"]`
  );

  if (trigger) {

    // 🔥 ここが追加ポイント
    forceAllFilter();

    // ポップアップ表示
    trigger.click();
  }

});
document.addEventListener("DOMContentLoaded", () => {
  applyFilter();
});
*/

const params = new URLSearchParams(window.location.search);
const filterType = params.get("filter");

const worksData = {

  hinatabokko: {
    type: "site",
    category: "自主制作",
    genre: "Webサイト",
    mockup: {
      img: "./images/hinatabokko-PCSP.png",
      caption: "古民家甘味処ひなたぼっこWEBサイト（デモサイト）"
    },

    info: {
      target: "<br>古民家の雰囲気、甘いものが好きな20～30代の女性。ひといきつける場所を求める20～30代の女性。",
      period: "<br>25時間（企画 / デザイン / ロゴ制作 / コーディング）",
      points: "<br>安心して来店できる導線設計を意識し、WordPress（Contact Form 7）でお問い合わせフォームを実装しました。PC表示ではタイトル文字が縦書き表示になる等、レスポンシブデザインもこだわりました。若い女性が親しみやすいデザインにするために温かみのある色味、丸みのある枠をメインに構成ました。また、コントラスト、彩度を下げた画像を使用することで、古民家のどこか懐かしいレトロな雰囲気を表現しました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../hinatabokko/index.html"
  },

  sydney: {
    type: "site",
    category: "自主制作",
    genre: "Webサイト",
    mockup: {
      img: "./images/site1-viewmore.png",
      caption: "シドニーのおすすめスポット3選サイト"
    },

    info: {
      target: "<br>海外に興味がある、もしくはシドニーに旅行の予定があり行き先を調べる20代～30代の方。",
      period: "<br>25時間（企画 / デザイン / コーディング）",
      points: "<br>SP表示、PC表示ともに見やすいシンプルなデザインを意識しました。シドニーのゆったりとした自然の多い街の雰囲気、おしゃれなカフェ文化のイメージを表現するため、落ち着いたペールトーンメインでデザインしました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../kadai-responsive-coding/index.html"
  },

  ginrintei: {
    type: "site",
    category: "クライアントワーク",
    genre: "Webサイト",
    mockup: {
      img: "./images/coming-soon.png",
      caption: "銀鱗亭様サイト"
    },

    info: {
      target: "<br>経済的に余裕があり、美味しいものを食べるのが好きな2～50代の男女。もともと銀鱗亭のことを知っていて、お店の詳細、雰囲気を知りたい方。",
      period: "<br>（企画 / ヒアリング / 写真 / デザイン / コーディング）",
      points: "<br>「来店時はなるべく予約をしてもらいたい」という課題解決のため、「ご予約はこちら」ボタンを固定ヘッダーに配置し予約へのハードルを下げました。また、勘違いされやすい「営業時間・支払いは現金のみ等の情報」もメニュー料金表の前に配置することで見落としを防ぐ工夫をしました。山中にある店舗のため電波が弱く、ページ遷移の際の離脱を防ぐため情報をトップページにまとめました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../kadai-responsive-coding/index.html"
  },

  kazukiumeda: {
    type: "site",
    category: "クライアントワーク", 
    genre: "Webサイト",
    mockup: {
      img: "./images/coming-soon.png",
      caption: "梅田和希様サイト"
    },

    info: {
      target: "<br>健康意識、漠然とした老後不安が高まり、資産運用・貯蓄についてプロに相談したいと考えている3～40代男女。家族を持ち、すでに保険に入っているが費用削減のためプランを見直したいと考えている3～40代の男女。",
      period: "<br>（企画 / ヒアリング / デザイン / コーディング）",
      points: "<br>「初見のお客様に警戒されやすい」という課題を解決するため、温かい色合い・読みやすいシンプルな構成を意識し、誠実な人間性が伝わる親しみやすいデザインにまとめました。業務内容コンテンツでは、「人生を通してお金の悩みを解決できる」ということを伝えるため現在→未来と時系列でまとめ、わかりやすい動線になるよう工夫しました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../kadai-responsive-coding/index.html"
  },

  pf: {
    type: "site",
    category: "自主制作",
    genre: "Webサイト",
    mockup: {
      img: "./images/originalportfolio-responsive.png",
      caption: "オリジナルポートフォリオサイト（このサイト）"
    },

    info: {
      target: "<br>Webデザイナーを募集している企業の採用担当者、Webデザイナーの方。",
      period: "<br>40時間（企画 / デザイン / コーディング/写真）",
      points: "<br>油絵、イラスト、美術セット塗装の経験があるため、手描き線のような流形シェイプ、角丸を取り入れました。メインビジュアル、フッターの画像は油絵の作品の一部分を使用しています。一目でわかるよう自分の情報をトップページにまとめ、気になった作品はしっかり見られるよう作品ページを設置しました。柔らかい色をメインに構成し、シェイプの緩やかさと相まって穏やかで優しいイメージのサイトを目指して制作しました。"
    },

    steps: [

      {
        title: "ワイヤーフレーム作成",
        img: "./images/hinatabokko-wire-fraime.png",
        text: "ワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入りますワイヤー制作のこだわりが入ります"


      },
      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "/kadai-original/index.html"
  },

  tousai: {
    type: "site",
    category: "自主制作",
    genre: "LP",
    mockup: {
      img: "./images/PCSP-tousaischoolimage.png",
      caption: "トウサイスクール（架空のITスクール）ランディングページ"
    },

    info: {
      target: "<br>自分のキャリアについて考え、IT技術を学びたいと考えている20～40代前半の方、スキルアップをして副業獲得を目指す20～40代のIT人材。",
      period: "<br>35時間（企画 / デザイン /コーディング）",
      points: "<br>架空の大手ITスクールLPを想定して制作しました。無料カウンセリングに申し込んでもらうことを目的に、情報を厳選し視線が自然とCTAボタンに向かうデザインを心掛けました。IT業界の知的で洗礼されたイメージを表現するため、ベースカラーは彩度低めの色でまとめました。一方で、CTAボタンはやる気や熱意を感じる再度高めのオレンジを設定し目立たせました。"
    },

    steps: [

      {
        title: "デザインカンプ作成",
        img: "./images/hinatabokko-design-comp.png",
        text: "デザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入りますデザイン制作のこだわりが入ります"
      },
      {
        title: "Web制作・コーディング",
        img: "./images/coming-soon.png",
        text: "コーディング内容"
      }
    ],

    url: "../practice_LP/index.html"
  },

  moocresbanner: {
    type: "image",
    category: "クライアントワーク",
    genre: "バナー",

    mockup: {
      img: "./images/banner/moocresbanner_back.jpg",
      largeImg: "./images/banner/MOOCRES_banner.jpg",
      caption: "動画制作スクールMOOCRESバナー"
    },

    info: {
      target: "副業から始めてプロの動画クリエイターになりたいと考えている20~30代の男性",
      period: "2.5時間",
      points: "太めのゴシック体と濃い色のグラデーションで男性向けの力強さ、技術力を表現しました。文字に角度をつけて勢い、上昇志向が感じられるようなレイアウトを意識しました。また、少人数クラスで楽しそうな様子が伝わるよう画像を選びました。"
    }
  },

    TechAcademyWebdesign: {
    type: "image",
    category: "クライアントワーク",
    genre: "バナー",

    mockup: {
      img: "./images/banner/techacademybanner-back.png",
      largeImg: "./images/banner/techacademy-banner.jpg",
      caption: "TechAcademyWebデザインコースバナー"
    },

    info: {
      target: "未経験でwebデザイナーへの転職を希望する2～30代の女性",
      period: "4時間",
      points: " 指定色の黄色をベースに落ち着いた暖色でまとめ親しみやすさを表現しました。信頼感を感じてもらえるよう、シャープな斜線と可読性の高いゴシック体を使用しました。"
    }
  },

    TechAcademyhukugyou: {
    type: "image",
    category: "クライアントワーク",
    genre: "バナー",

    mockup: {
      img: "./images/banner/techacademy2_back.jpg",
      largeImg: "./images/banner/techacademybanner_2.jpg",
      caption: "TechAcademyはじめての副業コースバナー"
    },

    info: {
      target: " 副業にチャレンジしたいけど、何が良いか迷っている20~30代の女性",
      period: "3時間",
      points: "Instagramのストーリーに掲載予定という依頼だったため、バナー下部にリンク、タグを貼る余白を設けました。指定色の水色をベースに寒色でまとめ、爽やかでスマートな印象のデザインにしました。"
    }
  },

      tousaibanner: {
    type: "image",
    category: "自主制作",
    genre: "バナー",

    mockup: {
      img: "./images/banner/tousai-banner.png",
      largeImg: "./images/banner/tousai-banner.png",
      caption: "トウサイスクール（架空のITスクール）バナー"
    },

    info: {
      target: " 自分のキャリアについて考え、IT技術を学びたいと考えている20～40代前半の方、スキルアップをして副業獲得を目指す20～40代のIT人材。",
      period: "2時間",
      points: "架空のITスクール「トウサイスクール」LPへの誘導を目的として制作しました。LPのデザインをベースに情報に優先順位をつけ、視線が情報をたどってCTAボタンまでスムーズに流れるようデザインを考えました。"
  }
},

    eikaiwa: {
    type: "image",
    category: "自主制作",
    genre: "バナー",

    mockup: {
      img: "./images/banner/wotrks-page-bunners.jpg",
      largeImg: "./images/banner/wotrks-page-bunners.jpg",
      caption: "架空の英会話教室のバナー"
    },

    info: {
      target: "2歳～小学生の子供がいる親世代の方。小学生～中学生の方。",
      period: "5時間",
      points: "知的なイメージの青をベースにデザインしました。冷たい印象にならないよう、丸い図形、丸めのゴシック体フォントを使用し、色の明度を工夫しました。デザインを複数のサイズに対応させるうえで、情報に優先順位をつけしっかり伝えたい情報が伝わるよう構成を考えました。"
    }
  },

      icon1: {
    type: "image",
    category: "自主制作", 
    genre: "アイコン",

    mockup: {
      img: "./images/icon/icons-whitepng.png",
      largeImg: "./images/icon/icons-whitepng.png",
      caption: "オリジナルポートフォリオサイト（当サイト）で使用したアイコン"
    },

    info: {
      points: "ポップで面白い、手描きのイメージを表現しました。ボタンに使用しているものは、マウスホバーするとふわふわ動く効果も付けました。"
    }
  },

    icon2: {
    type: "image",
    category: "自主制作", 
    genre: "アイコン",

    mockup: {
      img: "./images/icon/hinatabokko-logo.png",
      largeImg: "./images/icon/hinatabokko-logo.png",
      caption: "古民家甘味処ひなたぼっこサイトで使用したアイコン"
    },

    info: {
      points: "店名の由来になったひなたぼっこする鳥たちをモチーフにお店のロゴをデザインしました。一目で太陽とわかるシンプルさとかわいらしさの共存を意識しました。"
    }
  },

    lineheader: {
    type: "image",
    category: "クライアントワーク",  
    genre: "デジタルイラスト",

    mockup: {
      img: "./images/illust/line-header.png",
      largeImg: "./images/illust/IMG_2125.PNG",
      caption: "LINEヘッダー用イラスト"
    },

    info: {
      points: "LINEのヘッダー画像用に制作しました。依頼者の趣味のコーヒーを取り入れた「しっかり似ているデフォルメ似顔絵」を目指しました。大変似ていると好評です。<br>使用ツール：ibisPaint X"
    }
  },

        xheader: {
    type: "image",
    category: "クライアントワーク",
    genre: "デジタルイラスト",

    mockup: {
      img: "./images/xheader-yukisan-backwhite.png",
      largeImg: "./images/illust/Xheader-yukisann.png",
      caption: "Xのheader用イラスト"
    },

    info: {
      points: "Xのheader用にヒアリングをもとに制作しました。メッセージを簡潔に伝えつつ、お茶面な人柄を手描きのイラストで表現しました。<br>使用ツール：ibisPaint X"
    }
  },

      illust1: {
    type: "image",
    category: "自主制作",
    genre: "デジタルイラスト",

    mockup: {
      img: "./images/illust/nigaoe.png",
      largeImg: "./images/illust/illusticon.png",
      caption: "オリジナルTシャツ用イラスト"
    },

    info: {
      points: "誕生日プレゼントのTシャツ用に制作しました。特徴をつかみつつなるべくシンプルに仕上げることで普段使いしやすいデザインを意識しました。着用して出かけると「似てるね！」とよく声をかけていただけます。<br>使用ツール：ibisPaint X"
    }
  },

      illust2: {
    type: "image",
    category: "自主制作", 
    genre: "デジタルイラスト",

    mockup: {
      img: "./images/illust/zuttomo.png",
      largeImg: "./images/illust/IMG_2127.PNG",
      caption: "オリジナルTシャツ用イラスト"
    },

    info: {
      points: "同期にプレゼントするオリジナルTシャツ用に制作しました。平成に流行したイラストをオマージュした似顔絵で、感謝の気持ちを伝えました。<br>使用ツール：ibisPaint X"
    }
  },

        illust3: {
    type: "image",
    category: "クライアントワーク",
    genre: "アナログイラスト",

    mockup: {
      img: "./images/illust/baitpop.png",
      largeImg: "./images/illust/baitpop.png",
      caption: "販売促進のための売り場POP"
    },

    info: {
      points: "1秒で伝わるPOPをテーマに制作しました。大きなイラスト、実際に食べた感想を盛り込むことで目を引くPOPを目指しました。<br>使用画材：ボールペン、水性マーカー、コピー用紙"
    }
  },

      illust4: {
    type: "image",
    category: "クライアントワーク",
    genre: "アナログイラスト",

    mockup: {
      img: "./images/illust/tirashi.png",
      largeImg: "./images/illust/tirashi.png",
      caption: "ショップ月刊チラシ"
    },

    info: {
      points: "月刊で発行していた手描きのチラシ。月毎にタイトル文字の字体を変えるなど工夫して楽しく制作しました。<br>使用画材：ボールペン、水性マーカー、コピー用紙"
    }
  },

      illust5: {
    type: "image",
    category: "自主制作",
    genre: "アナログイラスト",

    mockup: {
      img: "./images/illust/hutaritabi.png",
      largeImg: "./images/illust/IMG_6819.JPG",
      caption: "ふたりたび"
    },

    info: {
      points: "学生の時のメインテーマである「島」のイメージを広げていた際の作品です。どこか遠い所へ行きたい気持ちを形にしました。<br>使用画材：透明水彩絵の具、ボールペン、画用紙"
    }
  },

      illust6: {
    type: "image",
    category: "自主制作",
    genre: "アナログイラスト",

    mockup: {
      img: "./images//illust/oyatu.png",
      largeImg: "./images/illust/IMG_6818.JPG",
      caption: "おやつの時間"
    },

    info: {
      points: "パンケーキが描きたくなり制作しました。自身の油絵作品を登場させるなど、一貫した世界観を持ったイラストを描くのが好きです。<br>使用画材：透明水彩絵の具、ボールペン、画用紙"
    }
  },

        oilpaint1: {
    type: "image",
    category: "自主制作",
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint1.png",
      largeImg: "./images/oilpaint/IMG_6277.JPG",
      caption: "卒業制作「Utopia_be in」"
    },

    info: {
      points: "大学の卒業制作で制作しました。自分の理想の世界です。<br>油絵具、アルキド樹脂絵具、キャンバス/H2100xW2400mm/2020年"
    }
  },

          oilpaint2: {
    type: "image",
    category: "自主制作", 
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint2.png",
      largeImg: "./images/oilpaint/FullSizeRender.JPG",
      caption: "コンクール応募作品「回顧」"
    },

    info: {
      points: "自分について、思い返して考えて描きました。<br>油絵具、キャンバス/H1620xW1303mm/2017年。"
    }
  },

          oilpaint3: {
    type: "image",
    category: "自主制作",
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint3.png",
      largeImg: "./images/oilpaint/IMG_2300.JPG",
      caption: "窓辺の少女模写"
    },

    info: {
      points: "大学の古典技法研究ゼミにて制作。当時と同じ材料を使用し支持体から自作し、グリザイユ技法で描いています。<br>油絵具、キャンバス/H877xW760mm/2018年"
    }
  },

          oilpaint4: {
    type: "image",
    category: "自主制作", 
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint4.png",
      largeImg: "./images/oilpaint/IMG_0643.JPG",
      caption: "あなたと"
    },

    info: {
      points: "グループ展の展示に向けて制作。イラストのテイストと油絵の融合を目指しました。<br>油絵具、アルキド樹脂絵具、キャンバス/H227xW158mm/2020年"
    }
  },

          oilpaint5: {
    type: "image",
    category: "自主制作", 
    genre: "油絵",

    mockup: {
      img: "./images/oilpaint/paint5.png",
      largeImg: "./images/oilpaint/5509651C-0616-44D4-BCB1-8F6C8699EF7E.JPG",
      caption: "「理想郷/楽園」"
    },

    info: {
      points: "「島」をテーマにすることにしたきっかけの作品です。当時感じていた息苦しさから一歩離れて、穏やかに暮らすことのできる理想の世界を描きました。<br>油絵具、アルキド樹脂絵具、パネル/H803xW910mm/2018年"
    }
  },
};

const popup = document.getElementById("popup");
const title = document.querySelector(".popup-title");
const stepsContainer = document.querySelector(".popup-steps");
const link = document.querySelector(".popup-link");

const mockupImage = document.querySelector(".mockup-image");
const mockupCaption = document.querySelector(".mockup-caption");
const mockupLink = document.querySelector(".mockup-link");

document.querySelectorAll(".website-image").forEach(card => {

  const trigger = card.querySelector(".js-popup-open");
  if (!trigger) return;

  const id = trigger.dataset.work;
  const data = worksData[id];
  if (!data) return;

  const categoryTag = card.querySelector(".tag-category");
  const genreTag = card.querySelector(".tag-genre");

  if (categoryTag) {
    categoryTag.textContent = data.category || "";
    categoryTag.classList.remove("client");

    if (data.category === "クライアントワーク") {
      categoryTag.classList.add("client");
    }
  }

  if (genreTag) {
    genreTag.textContent = data.genre || "";
  }

});

function normalizeGenre(genre) {

  const otherGenres = [
    "デジタルイラスト",
    "アナログイラスト",
    "油絵"
  ];

  if (otherGenres.includes(genre)) {
    return "その他";
  }

  return genre;
}

const filterButtons = document.querySelectorAll(".filter-btn");
const worksCards = document.querySelectorAll(".website-image");

// NOTE: カテゴリボタンが押下されたときに作品の表示・非表示を制御する
filterButtons.forEach(button => {

  button.addEventListener("click", () => {

    const filterValue = button.dataset.filter;

    if (filterValue === "ALL") {

      filterButtons.forEach(btn => btn.classList.remove("is-active"));
      button.classList.add("is-active");

      worksCards.forEach(card => {
        card.style.display = "block";
      });

      return;
    }

    const allButton = document.querySelector('[data-filter="ALL"]');
    if (allButton) {
      allButton.classList.remove("is-active");
    }

    button.classList.toggle("is-active");

    applyFilter();
  });

});

// NOTE: worksページに飛んだ時のカテゴリボタンと作品表示・非表示の制御
window.addEventListener("DOMContentLoaded", () => {
  // もっと見るボタン以外からの遷移はここで終わり
  if (!filterType) return;

  // ここから、もっと見るボタンから遷移したときの処理
  // いったん全ボタンのactiveを外す
  document.querySelectorAll(".filter-btn").forEach(btn => {
    btn.classList.remove("is-active");
  });

  // main の場合
  if (filterType === "main") {
    ["Webサイト", "LP", "バナー", "アイコン"].forEach(value => {
      const btn = document.querySelector(`.filter-btn[data-filter="${value}"]`);
      if (btn) btn.classList.add("is-active");
    });
  }

  // other の場合
  if (filterType === "other") {
    const btn = document.querySelector(`.filter-btn[data-filter="その他"]`);
    if (btn) btn.classList.add("is-active");
  }

  // フィルタ実行
  applyFilter();

});

let isInitialLoad = true;
// NOTE: 作品の表示・非表示を制御する
function applyFilter() {
  let activeFilters = Array.from(
    document.querySelectorAll(".filter-btn.is-active")
  ).map(btn => btn.dataset.filter);

  if (activeFilters.length === 0) {

    // ALLボタンをactiveにする
    const allButton = document.querySelector('.filter-btn[data-filter="ALL"]');
    if (allButton) {
      document.querySelectorAll(".filter-btn").forEach(btn => {
        btn.classList.remove("is-active");
      });
      allButton.classList.add("is-active");
    }

    worksCards.forEach(card => {
      card.style.display = "block";
    });

    return;
  }
  worksCards.forEach(card => {

    const workId = card.querySelector(".js-popup-open").dataset.work;
    const data = worksData[workId];

    const normalizedGenre = normalizeGenre(data.genre);
    const workTags = [data.category, normalizedGenre];

    const match = activeFilters.some(filter =>
      workTags.includes(filter)
    );

    card.style.display = match ? "block" : "none";

  });
}

document.querySelectorAll(".js-popup-open").forEach(btn => {
  btn.addEventListener("click", e => {
    e.preventDefault();

  const popupContent = document.querySelector(".popup-content");
  popupContent.scrollTop = 0;

    const id = btn.dataset.work;
    const data = worksData[id];
    popup.dataset.type = data.type;

    title.textContent = data.title || "";

    mockupImage.src = data.mockup.img;
    mockupImage.dataset.large = data.mockup.largeImg || data.mockup.img;

    mockupCaption.textContent = data.mockup.caption;
    if (data.type === "site") {
      mockupLink.href = data.url;
      mockupLink.style.pointerEvents = "auto";
    } else {
      mockupLink.removeAttribute("href");
    }

let infoContainer = document.querySelector(".popup-info");

if (!infoContainer) {
  infoContainer = document.createElement("div");
  infoContainer.classList.add("popup-info");
}

infoContainer.innerHTML = ""; 

if (data.info.target) {
  infoContainer.insertAdjacentHTML("beforeend", `
    <p><strong>ターゲット:</strong> ${data.info.target}</p>
  `);
}

if (data.info.period) {
  infoContainer.insertAdjacentHTML("beforeend", `
    <p><strong>制作期間:</strong> ${data.info.period}</p>
  `);
}

if (data.info.points) {
  infoContainer.insertAdjacentHTML("beforeend", `
    <p><strong>意識したこと:</strong> ${data.info.points}</p>
  `);
}

mockupCaption.after(infoContainer);

    stepsContainer.innerHTML = "";
    link.style.display = "none";

    const oldTitle = document.querySelector(".steps-title");
    if (oldTitle) oldTitle.remove();
    if (data.type === "site") {
      const stepsTitle = document.createElement("h3");
      stepsTitle.classList.add("steps-title");
      stepsTitle.textContent = "制作過程";
      infoContainer.after(stepsTitle);

      data.steps.forEach((step, index) => {
        stepsContainer.insertAdjacentHTML("beforeend", `
      <div class="popup-step">
        <h4>
          <span class="step-number">${index + 1}</span>
          <span class="step-title">${step.title}</span>
        </h4>
        <img src="${step.img}" data-large="${step.largeImg || step.img}" alt="">

        <p>${step.text}</p>
      </div>
    `);
      });

      link.href = data.url;
      link.style.display = "inline-block";
    } else if (data.type === "image") {
      stepsContainer.innerHTML = "";
      link.style.display = "none";
    }
    popup.classList.add("is-open");
    setTimeout(() => {
  popupContent.scrollTop = 0;
}, 0);
  });
});

document.querySelector(".popup-close").addEventListener("click", () => {
  popup.classList.remove("is-open");
  const popupContent = document.querySelector(".popup-content");
  popupContent.scrollTop = 0;
});

popup.addEventListener("click", e => {
  if (e.target === popup) {
    popup.classList.remove("is-open");
    const popupContent = document.querySelector(".popup-content");
    popupContent.scrollTop = 0;
  }
});

const imageModal = document.getElementById("image-modal");
const imageModalImg = document.querySelector(".image-modal-content");
const imageModalClose = document.querySelector(".image-modal-close");
function closeImageModal() {
  imageModal.classList.remove("is-open");
  imageModalImg.src = "";
  document.body.style.overflow = "";
}

imageModalClose.addEventListener("click", closeImageModal);

imageModal.addEventListener("click", function (e) {
  if (e.target === imageModal) {
    closeImageModal();
  }
});

mockupImage.addEventListener("click", (e) => {
  const currentType = popup.dataset.type;
  if (currentType === "site") return;
  const largeSrc = e.currentTarget.dataset.large || e.currentTarget.src;
  imageModalImg.src = largeSrc;
  imageModal.classList.add("is-open");
  document.body.style.overflow = "hidden";
});

window.addEventListener("load", () => {
  const params = new URLSearchParams(window.location.search);
  const workId = params.get("work");
  if (!workId) return;
  const data = worksData[workId];
  if (!data) return;
  const trigger = document.querySelector(
    `.js-popup-open[data-work="${workId}"]`
  );
  if (trigger) {
    trigger.click();
  }
});